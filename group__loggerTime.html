<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SELKIELogger: Logger: Timer functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SELKIELogger
   &#160;<span id="projectnumber">0.9.18</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__loggerTime.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Logger: Timer functions<div class="ingroups"><a class="el" href="group__Executables.html">User facing software tools</a> &raquo; <a class="el" href="group__logger.html">Logger internal functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Logger: Timer functions:</div>
<div class="dyncontent">
<div class="center"><img src="group__loggerTime.png" border="0" usemap="#agroup____loggerTime" alt=""/></div>
<map name="agroup____loggerTime" id="agroup____loggerTime">
<area shape="rect" title=" " alt="" coords="237,5,413,31"/>
<area shape="rect" href="group__logger.html" title=" " alt="" coords="5,5,189,31"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtimer__params.html">timer_params</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer specific parameters.  <a href="structtimer__params.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9ece4a95fd7e909610cd3ee81ac7d861"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTime.html#ga9ece4a95fd7e909610cd3ee81ac7d861">timer_setup</a> (void *ptargs)</td></tr>
<tr class="memdesc:ga9ece4a95fd7e909610cd3ee81ac7d861"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check parameters, but no other setup required.  <a href="group__loggerTime.html#ga9ece4a95fd7e909610cd3ee81ac7d861">More...</a><br /></td></tr>
<tr class="separator:ga9ece4a95fd7e909610cd3ee81ac7d861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga25b3d2e4834e5c3c08f551d8737ad1f2"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTime.html#ga25b3d2e4834e5c3c08f551d8737ad1f2">timer_logging</a> (void *ptargs)</td></tr>
<tr class="memdesc:ga25b3d2e4834e5c3c08f551d8737ad1f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate timer message at requested frequency.  <a href="group__loggerTime.html#ga25b3d2e4834e5c3c08f551d8737ad1f2">More...</a><br /></td></tr>
<tr class="separator:ga25b3d2e4834e5c3c08f551d8737ad1f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6430caa646453b23979a7399dc1fe08a"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTime.html#ga6430caa646453b23979a7399dc1fe08a">timer_shutdown</a> (void *ptargs)</td></tr>
<tr class="memdesc:ga6430caa646453b23979a7399dc1fe08a"><td class="mdescLeft">&#160;</td><td class="mdescRight">No shutdown required - does nothing.  <a href="group__loggerTime.html#ga6430caa646453b23979a7399dc1fe08a">More...</a><br /></td></tr>
<tr class="separator:ga6430caa646453b23979a7399dc1fe08a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc80ed0422de94b2d63d619343856fac"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTime.html#gacc80ed0422de94b2d63d619343856fac">timer_channels</a> (void *ptargs)</td></tr>
<tr class="memdesc:gacc80ed0422de94b2d63d619343856fac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate channel map and push to logging queue.  <a href="group__loggerTime.html#gacc80ed0422de94b2d63d619343856fac">More...</a><br /></td></tr>
<tr class="separator:gacc80ed0422de94b2d63d619343856fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad63e807556b4e17500ab1e5fed1bcc3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdevice__callbacks.html">device_callbacks</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTime.html#gad63e807556b4e17500ab1e5fed1bcc3a">timer_getCallbacks</a> (void)</td></tr>
<tr class="memdesc:gad63e807556b4e17500ab1e5fed1bcc3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill out device callback functions for logging.  <a href="group__loggerTime.html#gad63e807556b4e17500ab1e5fed1bcc3a">More...</a><br /></td></tr>
<tr class="separator:gad63e807556b4e17500ab1e5fed1bcc3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cab4b4422e6eb9ac05c9f93b17c1d36"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtimer__params.html">timer_params</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTime.html#ga2cab4b4422e6eb9ac05c9f93b17c1d36">timer_getParams</a> (void)</td></tr>
<tr class="memdesc:ga2cab4b4422e6eb9ac05c9f93b17c1d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill out default timer parameters.  <a href="group__loggerTime.html#ga2cab4b4422e6eb9ac05c9f93b17c1d36">More...</a><br /></td></tr>
<tr class="separator:ga2cab4b4422e6eb9ac05c9f93b17c1d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa8a65ebf12a1c74aff475caef1cd16f8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTime.html#gaa8a65ebf12a1c74aff475caef1cd16f8">timer_parseConfig</a> (<a class="el" href="structlog__thread__args__t.html">log_thread_args_t</a> *lta, <a class="el" href="structconfig__section.html">config_section</a> *s)</td></tr>
<tr class="memdesc:gaa8a65ebf12a1c74aff475caef1cd16f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take a configuration section and parse parameters.  <a href="group__loggerTime.html#gaa8a65ebf12a1c74aff475caef1cd16f8">More...</a><br /></td></tr>
<tr class="separator:gaa8a65ebf12a1c74aff475caef1cd16f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Generate timestamps at as close to a regular frequency as possible, which can be used to synchronise the output. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gacc80ed0422de94b2d63d619343856fac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc80ed0422de94b2d63d619343856fac">&#9670;&nbsp;</a></span>timer_channels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* timer_channels </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptargs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate channel map and push to logging queue. </p>
<p>Populate list of channels and push to queue as a map message</p>
<p>Exits thread in case of error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptargs</td><td>Pointer to <a class="el" href="structlog__thread__args__t.html" title="Logging thread information.">log_thread_args_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL - Exit code in ptargs-&gt;returnCode if required </dd></dl>

<p class="definition">Definition at line <a class="el" href="LoggerTime_8c_source.html#l00146">146</a> of file <a class="el" href="LoggerTime_8c_source.html">LoggerTime.c</a>.</p>

</div>
</div>
<a id="gad63e807556b4e17500ab1e5fed1bcc3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad63e807556b4e17500ab1e5fed1bcc3a">&#9670;&nbsp;</a></span>timer_getCallbacks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdevice__callbacks.html">device_callbacks</a> timer_getCallbacks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill out device callback functions for logging. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structdevice__callbacks.html" title="Device specific function information.">device_callbacks</a> for timestamp generators </dd></dl>

<p class="definition">Definition at line <a class="el" href="LoggerTime_8c_source.html#l00187">187</a> of file <a class="el" href="LoggerTime_8c_source.html">LoggerTime.c</a>.</p>

</div>
</div>
<a id="ga2cab4b4422e6eb9ac05c9f93b17c1d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cab4b4422e6eb9ac05c9f93b17c1d36">&#9670;&nbsp;</a></span>timer_getParams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtimer__params.html">timer_params</a> timer_getParams </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill out default timer parameters. </p>
<dl class="section return"><dt>Returns</dt><dd>Default parameters for a timestamp generator </dd></dl>

<p class="definition">Definition at line <a class="el" href="LoggerTime_8c_source.html#l00198">198</a> of file <a class="el" href="LoggerTime_8c_source.html">LoggerTime.c</a>.</p>

</div>
</div>
<a id="ga25b3d2e4834e5c3c08f551d8737ad1f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga25b3d2e4834e5c3c08f551d8737ad1f2">&#9670;&nbsp;</a></span>timer_logging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* timer_logging </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptargs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate timer message at requested frequency. </p>
<p>Generate timestamp messages at the specified interval using CLOCK_MONOTONIC, and epoch messages whenever the value of time() changes (i.e once a second).</p>
<p>The loop saves the value of CLOCK_MONOTONIC at the start of each iteration and uses that to calculate the target start time for the next iteration. If the execution of the loop has taken too long (i.e. the next iteration should already have started), a warning is generated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptargs</td><td>Pointer to <a class="el" href="structlog__thread__args__t.html" title="Logging thread information.">log_thread_args_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL - Exit code in ptargs-&gt;returnCode if required </dd></dl>

<p class="definition">Definition at line <a class="el" href="LoggerTime_8c_source.html#l00061">61</a> of file <a class="el" href="LoggerTime_8c_source.html">LoggerTime.c</a>.</p>

</div>
</div>
<a id="gaa8a65ebf12a1c74aff475caef1cd16f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa8a65ebf12a1c74aff475caef1cd16f8">&#9670;&nbsp;</a></span>timer_parseConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool timer_parseConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__thread__args__t.html">log_thread_args_t</a> *&#160;</td>
          <td class="paramname"><em>lta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structconfig__section.html">config_section</a> *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take a configuration section and parse parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lta</td><td>Pointer to <a class="el" href="structlog__thread__args__t.html" title="Logging thread information.">log_thread_args_t</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>Pointer to <a class="el" href="structconfig__section.html" title="Configuration file section.">config_section</a> to be parsed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on error </dd></dl>

<p class="definition">Definition at line <a class="el" href="LoggerTime_8c_source.html#l00212">212</a> of file <a class="el" href="LoggerTime_8c_source.html">LoggerTime.c</a>.</p>

</div>
</div>
<a id="ga9ece4a95fd7e909610cd3ee81ac7d861"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9ece4a95fd7e909610cd3ee81ac7d861">&#9670;&nbsp;</a></span>timer_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* timer_setup </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptargs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check parameters, but no other setup required. </p>
<p>Ensure a name is allocated to the timer.</p>
<p>No other initialisation is required in this case.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptargs</td><td>Pointer to <a class="el" href="structlog__thread__args__t.html" title="Logging thread information.">log_thread_args_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL - Exit code in ptargs-&gt;returnCode if required </dd></dl>

<p class="definition">Definition at line <a class="el" href="LoggerTime_8c_source.html#l00034">34</a> of file <a class="el" href="LoggerTime_8c_source.html">LoggerTime.c</a>.</p>

</div>
</div>
<a id="ga6430caa646453b23979a7399dc1fe08a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6430caa646453b23979a7399dc1fe08a">&#9670;&nbsp;</a></span>timer_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* timer_shutdown </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptargs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>No shutdown required - does nothing. </p>
<p>Free resources as required.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptargs</td><td>Pointer to <a class="el" href="structlog__thread__args__t.html" title="Logging thread information.">log_thread_args_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL - Exit code in ptargs-&gt;returnCode if required </dd></dl>

<p class="definition">Definition at line <a class="el" href="LoggerTime_8c_source.html#l00127">127</a> of file <a class="el" href="LoggerTime_8c_source.html">LoggerTime.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
