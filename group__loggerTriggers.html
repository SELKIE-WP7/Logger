<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SELKIELogger: Logger: Global triggers/signal handlers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SELKIELogger
   &#160;<span id="projectnumber">0.9.18</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__loggerTriggers.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Logger: Global triggers/signal handlers<div class="ingroups"><a class="el" href="group__Executables.html">User facing software tools</a> &raquo; <a class="el" href="group__logger.html">Logger internal functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Logger: Global triggers/signal handlers:</div>
<div class="dyncontent">
<div class="center"><img src="group__loggerTriggers.png" border="0" usemap="#agroup____loggerTriggers" alt=""/></div>
<map name="agroup____loggerTriggers" id="agroup____loggerTriggers">
<area shape="rect" href="group__logger.html" title=" " alt="" coords="5,13,189,38"/>
<area shape="rect" title=" " alt="" coords="237,5,408,45"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1465efe43d3100fb2f31042993219da6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTriggers.html#ga1465efe43d3100fb2f31042993219da6">signalShutdown</a> (int signnum)</td></tr>
<tr class="memdesc:ga1465efe43d3100fb2f31042993219da6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set safe shutdown flag.  <a href="group__loggerTriggers.html#ga1465efe43d3100fb2f31042993219da6">More...</a><br /></td></tr>
<tr class="separator:ga1465efe43d3100fb2f31042993219da6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32635bb816f9dfe4c064436bff2c7149"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTriggers.html#ga32635bb816f9dfe4c064436bff2c7149">signalRotate</a> (int signnum)</td></tr>
<tr class="memdesc:ga32635bb816f9dfe4c064436bff2c7149"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set log rotate flag.  <a href="group__loggerTriggers.html#ga32635bb816f9dfe4c064436bff2c7149">More...</a><br /></td></tr>
<tr class="separator:ga32635bb816f9dfe4c064436bff2c7149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga615f74552d24168c15ac81669a95d21f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTriggers.html#ga615f74552d24168c15ac81669a95d21f">signalPause</a> (int signnum)</td></tr>
<tr class="memdesc:ga615f74552d24168c15ac81669a95d21f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set logger pause flag.  <a href="group__loggerTriggers.html#ga615f74552d24168c15ac81669a95d21f">More...</a><br /></td></tr>
<tr class="separator:ga615f74552d24168c15ac81669a95d21f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa91152d27c04b0ae39c2a5a1d0cdd8fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTriggers.html#gaa91152d27c04b0ae39c2a5a1d0cdd8fc">signalUnpause</a> (int signnum)</td></tr>
<tr class="memdesc:gaa91152d27c04b0ae39c2a5a1d0cdd8fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear logger pause flag.  <a href="group__loggerTriggers.html#gaa91152d27c04b0ae39c2a5a1d0cdd8fc">More...</a><br /></td></tr>
<tr class="separator:gaa91152d27c04b0ae39c2a5a1d0cdd8fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gad0332ffdd9c2979608a4f9e7026a010b"><td class="memItemLeft" align="right" valign="top">atomic_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTriggers.html#gad0332ffdd9c2979608a4f9e7026a010b">shutdownFlag</a></td></tr>
<tr class="memdesc:gad0332ffdd9c2979608a4f9e7026a010b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger clean software shutdown.  <a href="group__loggerTriggers.html#gad0332ffdd9c2979608a4f9e7026a010b">More...</a><br /></td></tr>
<tr class="separator:gad0332ffdd9c2979608a4f9e7026a010b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f99e37f81393630f3f9708e65ea8f11"><td class="memItemLeft" align="right" valign="top">atomic_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTriggers.html#ga9f99e37f81393630f3f9708e65ea8f11">rotateNow</a></td></tr>
<tr class="memdesc:ga9f99e37f81393630f3f9708e65ea8f11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger immediate log rotation.  <a href="group__loggerTriggers.html#ga9f99e37f81393630f3f9708e65ea8f11">More...</a><br /></td></tr>
<tr class="separator:ga9f99e37f81393630f3f9708e65ea8f11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8782f733958aa4d03183a7a12c70548a"><td class="memItemLeft" align="right" valign="top">atomic_bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loggerTriggers.html#ga8782f733958aa4d03183a7a12c70548a">pauseLog</a></td></tr>
<tr class="memdesc:ga8782f733958aa4d03183a7a12c70548a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pause logging.  <a href="group__loggerTriggers.html#ga8782f733958aa4d03183a7a12c70548a">More...</a><br /></td></tr>
<tr class="separator:ga8782f733958aa4d03183a7a12c70548a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>In order to allow the behaviour of the main logging thread to be controlled, it will check the state of defined trigger variables and react accordingly. These variables can be set by signal handlers, input threads or by conditions detected in the main logging loop.</p>
<p>The signal handlers are hooked to multiple signals. The SIGRTMIN + n flags are used to be independent of system defined meanings, while other signals are hooked to match traditional service behaviours. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga615f74552d24168c15ac81669a95d21f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga615f74552d24168c15ac81669a95d21f">&#9670;&nbsp;</a></span>signalPause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signalPause </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signnum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set logger pause flag. </p>
<p>Called as a signal handler.</p>
<p>By default, this is hooked to SIGRTMIN + 3</p>
<p>The pause flag can only be cleared by the unpause signal handler, or during shutdown. Calling this function while already paused will have no additional effect.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">signnum</td><td>Signal number - ignored </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LoggerSignals_8c_source.html#l00087">87</a> of file <a class="el" href="LoggerSignals_8c_source.html">LoggerSignals.c</a>.</p>

</div>
</div>
<a id="ga32635bb816f9dfe4c064436bff2c7149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32635bb816f9dfe4c064436bff2c7149">&#9670;&nbsp;</a></span>signalRotate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signalRotate </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signnum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set log rotate flag. </p>
<p>Called as a signal handler.</p>
<p>By default, this is hooked to SIGUSR1, SIGHUP and SIGRTMIN+2</p>
<p>This flag will be cleared by the main loop once logs have been successfully rotated. If the logger is paused, logs will be rotated when resumed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">signnum</td><td>Signal number - ignored </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LoggerSignals_8c_source.html#l00073">73</a> of file <a class="el" href="LoggerSignals_8c_source.html">LoggerSignals.c</a>.</p>

</div>
</div>
<a id="ga1465efe43d3100fb2f31042993219da6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1465efe43d3100fb2f31042993219da6">&#9670;&nbsp;</a></span>signalShutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signalShutdown </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signnum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set safe shutdown flag. </p>
<p>Called as a signal handler.</p>
<p>By default, this is hooked to SIGINT, SIGQUIT and SIGRTMIN + 1</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">signnum</td><td>Signal number - ignored</td></tr>
  </table>
  </dd>
</dl>
<p>Signal handler - sets shutdown flag</p>
<p>Signal handler - sets shutdown flag </p>

<p class="definition">Definition at line <a class="el" href="LoggerSignals_8c_source.html#l00059">59</a> of file <a class="el" href="LoggerSignals_8c_source.html">LoggerSignals.c</a>.</p>

</div>
</div>
<a id="gaa91152d27c04b0ae39c2a5a1d0cdd8fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa91152d27c04b0ae39c2a5a1d0cdd8fc">&#9670;&nbsp;</a></span>signalUnpause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signalUnpause </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signnum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear logger pause flag. </p>
<p>Called as a signal handler.</p>
<p>By default, this is hooked to SIGRTMIN + 4</p>
<p>Calling this while the logger is not paused has no effect.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">signnum</td><td>Signal number - ignored </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LoggerSignals_8c_source.html#l00100">100</a> of file <a class="el" href="LoggerSignals_8c_source.html">LoggerSignals.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga8782f733958aa4d03183a7a12c70548a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8782f733958aa4d03183a7a12c70548a">&#9670;&nbsp;</a></span>pauseLog</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">atomic_bool pauseLog</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pause logging. </p>
<p>Will not rotate or close log files, but will stop reading from inputs while this variable is set. </p>

<p class="definition">Definition at line <a class="el" href="LoggerSignals_8c_source.html#l00050">50</a> of file <a class="el" href="LoggerSignals_8c_source.html">LoggerSignals.c</a>.</p>

</div>
</div>
<a id="ga9f99e37f81393630f3f9708e65ea8f11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9f99e37f81393630f3f9708e65ea8f11">&#9670;&nbsp;</a></span>rotateNow</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">atomic_bool rotateNow</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Trigger immediate log rotation. </p>
<p>Will be reset once files have been rotated, which may not happen immediately if the logger is paused. </p>

<p class="definition">Definition at line <a class="el" href="LoggerSignals_8c_source.html#l00042">42</a> of file <a class="el" href="LoggerSignals_8c_source.html">LoggerSignals.c</a>.</p>

</div>
</div>
<a id="gad0332ffdd9c2979608a4f9e7026a010b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad0332ffdd9c2979608a4f9e7026a010b">&#9670;&nbsp;</a></span>shutdownFlag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">atomic_bool shutdownFlag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Trigger clean software shutdown. </p>
<p>Will end any running _logging functions and the main loop in <a class="el" href="Logger_8c.html" title="Generates main data logging executable.">Logger.c</a></p>
<p>For obvious reasons, this flag is never reset. </p>

<p class="definition">Definition at line <a class="el" href="LoggerSignals_8c_source.html#l00034">34</a> of file <a class="el" href="LoggerSignals_8c_source.html">LoggerSignals.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
