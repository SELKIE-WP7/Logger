list(APPEND SL_MP_SRC MPSerial.c)
list(APPEND SL_MP_INC MPSerial.h MPTypes.h)

find_package(msgpack)

add_library(SELKIELoggerMP ${SL_MP_SRC})
set_target_properties(SELKIELoggerMP PROPERTIES VERSION ${PROJECT_VERSION})
set_target_properties(SELKIELoggerMP PROPERTIES SONAME 1)

set_target_properties(SELKIELoggerMP PROPERTIES PUBLIC_HEADER SELKIELoggerMP.h)
set_target_properties(SELKIELoggerMP PROPERTIES PRIVATE_HEADER "${SL_MP_INC}")

target_link_libraries(SELKIELoggerMP PUBLIC SELKIELoggerBase msgpackc)

include(GNUInstallDirs)

target_include_directories(SELKIELoggerMP PUBLIC
	$<BUILD_INTERFACE:${PROJECT_SOURCE_DIR}/library>
	$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
	$<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}/SELKIELogger>)
target_include_directories(SELKIELoggerMP PRIVATE
	$<BUILD_INTERFACE:${PROJECT_SOURCE_DIR}/library>
	$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
	$<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}/SELKIELogger>)

install(TARGETS SELKIELoggerMP
	EXPORT SLPubLibs
	LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR} COMPONENT MP
	PUBLIC_HEADER DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/SELKIELogger COMPONENT MPDev
	PRIVATE_HEADER DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/SELKIELogger/MP COMPONENT MPDev
	)

set(CPACK_COMPONENT_MP_GROUP "Libraries")
set(CPACK_COMPONENT_MP_DISPLAY_NAME "SELKIE MP Library")
set(CPACK_COMPONENT_MPDEV_GROUP "Headers")
set(CPACK_COMPONENT_MPDEV_DISPLAY_NAME "SELKIE MP Library - Headers")
set(CPACK_COMPONENT_MPDEV_DEPENDS MP)
